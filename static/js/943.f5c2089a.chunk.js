!function(){"use strict";var t={9943:function(t,e,n){var o=n(5861),r=n(7757),s=n.n(r),i=n(885),a=n(5671),c=n(3144),u=n(763),f=n.n(u),h=(0,c.Z)((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";(0,a.Z)(this,t),this.teacher=e,this.subject=n})),l=(0,c.Z)((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(0,a.Z)(this,t),this.timetables=e,this.cost=0})),v=function(){function t(e,n,o){(0,a.Z)(this,t),this.working_days=e,this.classrooms=n,this.school_data=o,this.genePool=this.createGenePool(),this.population=this.generatePopulation()}return(0,c.Z)(t,[{key:"createGenePool",value:function(){var t={};return this.classrooms.forEach((function(e){t[e]=[{teacher:"",subject:"",slots:0}]})),this.school_data.forEach((function(e){e.subjects.forEach((function(e){e.faculty.forEach((function(n){n.classrooms.forEach((function(o){t[o].push({teacher:n.teacher,subject:e.subject_name,slots:n.slots})}))}))}))})),t}},{key:"getGenePool",value:function(){return this.genePool}},{key:"generatePopulation",value:function(){for(var t=this,e=[],n=function(n){var o=[];t.classrooms.forEach((function(e){var n={classroom:e,timetable:[]};t.working_days.forEach((function(o){for(var r=[],s=o.slots,i=0;i<s;i++){var a=f().sample(t.genePool[e]);r.push(new h(a.teacher,a.subject))}n.timetable.push(r)})),o.push(n)})),e.push(new l(o))},o=0;o<1e3;o++)n();return e}},{key:"getPopulation",value:function(){return this.population}}]),t}(),p=function(t,e,n,o,r){if(e.cost>t.cost){var s=t;t=e,e=s}var i=[];return o.forEach((function(o,s){var a={classroom:o,timetable:[]},c=n[o];r.forEach((function(n,o){for(var r=[],i=n.slots,u=0;u<i;u++){var l=void 0;if(f().random(0,1,!0)<.02){var v=f().sample(c);l=new h(v.teacher,v.subject)}else l=f().random(0,1,!0)<.5?t.timetables[s].timetable[o][u]:e.timetables[s].timetable[o][u];r.push(l)}a.timetable.push(r)})),i.push(a)})),new l(i)},d=function(t,e,n,o,r){return t.forEach((function(t){t.cost=function(t,e,n,o,r){var s=0;return f().forEach(n,(function(e,n){for(var o=function(e){var o=[];f().forEach(t,(function(t){var r=t.timetable[n][e];""!==r.teacher&&o.push(r.teacher)}));var r=f().uniq(o);r.length<o.length&&(s+=o.length-r.length)},r=0;r<e.slots;r++)o(r)})),f().forEach(t,(function(t){var n=e[t.classroom];f().forEach(f().flatten(t.timetable),(function(t){if(""!==t.teacher&&""!==t.subject){var e=f().findIndex(n,(function(e){return e.teacher===t.teacher&&e.subject===t.subject}));n[e].slots-=1}})),f().forEach(n,(function(t){s+=Math.abs(t.slots)}))})),f().forEach(t,(function(t){f().forEach(n,(function(e,n){if(e.slots>1)for(var o=0;o<e.slots-1;o++)t.timetable[n][o].teacher===t.timetable[n][o+1].teacher&&(s+=.05)}))})),s}(t.timetables,f().cloneDeep(e),n)})),f().sortBy(t,(function(t){return t.cost}))},m=function(){function t(e,n,o){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(0,a.Z)(this,t),this.working_days=e,this.classrooms=n,this.school_data=o,this.debug=r}return(0,c.Z)(t,[{key:"selectFittest",value:function(t,e){return t=d(t,e,this.working_days,this.classrooms,this.school_data),f().slice(t,0,100)}},{key:"run",value:function(){for(var t=0,e=0,n=0,o=new v(this.working_days,this.classrooms,this.school_data),r=o.getPopulation(),s=o.getGenePool();t<1e4;){var a=this.selectFittest(r,s),c=a[0].cost;if(this.debug&&console.log("Generation = ".concat(t+1,", Best Cost = ").concat(c)),0===c)return a[0];if(c<1&&c===e){if(20===++n)return a[0]}else n=0;e=c;for(var u=[],h=0;h<1e3;h++){var l=f().sampleSize(a,2),d=(0,i.Z)(l,2),m=d[0],b=d[1];u.push(p(m,b,s,this.classrooms,this.working_days))}r=u,t++}return r[0]}}]),t}(),b=function(){var t=(0,o.Z)(s().mark((function t(e,n,o){var r,i;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new m(e,n,o,!1),t.next=3,r.run();case 3:return i=t.sent,t.abrupt("return",i);case 5:case"end":return t.stop()}}),t)})));return function(e,n,o){return t.apply(this,arguments)}}();onmessage=function(t){var e=t.data,n=e.workingDays,o=e.classrooms,r=e.courses;b(n,o,r).then((function(t){postMessage(t)}))}}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var s=e[o]={id:o,loaded:!1,exports:{}};return t[o].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}n.m=t,n.x=function(){var t=n.O(void 0,[49],(function(){return n(9943)}));return t=n.O(t)},function(){var t=[];n.O=function(e,o,r,s){if(!o){var i=1/0;for(f=0;f<t.length;f++){o=t[f][0],r=t[f][1],s=t[f][2];for(var a=!0,c=0;c<o.length;c++)(!1&s||i>=s)&&Object.keys(n.O).every((function(t){return n.O[t](o[c])}))?o.splice(c--,1):(a=!1,s<i&&(i=s));if(a){t.splice(f--,1);var u=r();void 0!==u&&(e=u)}}return e}s=s||0;for(var f=t.length;f>0&&t[f-1][2]>s;f--)t[f]=t[f-1];t[f]=[o,r,s]}}(),n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.f={},n.e=function(t){return Promise.all(Object.keys(n.f).reduce((function(e,o){return n.f[o](t,e),e}),[]))},n.u=function(t){return"static/js/"+t+".4c5d0369.chunk.js"},n.miniCssF=function(t){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}(),n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t},n.p="/schedulex/",function(){var t={943:1};n.f.i=function(e,o){t[e]||importScripts(n.p+n.u(e))};var e=self.webpackChunkschedulex=self.webpackChunkschedulex||[],o=e.push.bind(e);e.push=function(e){var r=e[0],s=e[1],i=e[2];for(var a in s)n.o(s,a)&&(n.m[a]=s[a]);for(i&&i(n);r.length;)t[r.pop()]=1;o(e)}}(),function(){var t=n.x;n.x=function(){return n.e(49).then(t)}}();n.x()}();
//# sourceMappingURL=943.f5c2089a.chunk.js.map